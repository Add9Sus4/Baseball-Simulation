<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<%= stylesheet_link_tag "jquery-ui.min", 'data-turbolinks-track' => true %>
<%= javascript_include_tag "jquery-ui.min", 'data-turbolinks-track' =>true %>
<%= javascript_include_tag 'bootstrap-sortable', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'moment.min', 'data-turbolinks-track' => true %>
<%= stylesheet_link_tag    'bootstrap-sortable', 'data-turbolinks-track' => true %>

<div class="container-fluid">
  <h3>Draft <small>(<%= @year %>)</small></h3>
  <h4>P</h4>
  <table class="table table-default custom-smaller-table sortable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Drafted By</th>
        <th>Round</th>
        <th>Pos.</th>
        <th>Age</th>
        <th class="info_cell">Height</th>
        <th class="info_cell">Weight</th>
        <th class="info_cell">Throws</th>
        <th class="info_cell" data-defaultsort="desc">Salary</th>
        <th class="attribute_cell tooltip_enable" title="How hard this player can throw the ball">Arm</th>
        <th class="attribute_cell tooltip_enable" title="How well this player can make a pitch deviate from its expected path">Mov</th>
        <th class="attribute_cell tooltip_enable" title="How well this player can throw strikes instead of balls">Ctr</th>
        <th class="attribute_cell tooltip_enable" title="How well this player can hit a specific location with a pitch">Loc</th>
        <th class="attribute_cell tooltip_enable" title="How well this player can make quick, sudden movements">Agi</th>
        <th class="attribute_cell tooltip_enable" title="How quickly this player reacts to a play">Rtm</th>
        <th class="attribute_cell tooltip_enable" title="How well this player can field the ball">Fld</th>
        <th class="attribute_cell tooltip_enable" title="How accurately this player can throw the ball">Thr</th>
        <th class="attribute_cell tooltip_enable" title="How often this player makes the right decision for a given play">Int</th>
        <th class="attribute_cell tooltip_enable" title="How quickly this player gets tired">End</th>
      </tr>
    </thead>
    <tbody>
      <% @pitchers.each do |player| %>
      <tr>
        <td><%= link_to player, player, method: :get %></td>
        <td><% if player.team_id == 1 %>-<% else %><%= link_to player.team.full_name, player.team, method: :get %><% end %></td>
        <td><%= player.team_id == 1 ? "-" : player.draft_round %></td>
        <td><%= player.team_id == 1 ? "-" : player.draft_position %></td>
        <td><%= player.age %></td>
        <td class="height info_cell"><%= player.formatted_height %></td>
        <td class="info_cell"><%= player.weight %> lb.</td>
        <td class="info_cell"><%= player.throwing_hand.capitalize %></td>
        <td class="info_cell salary"><%= number_to_currency(player.salary) %></td>
        <td class="attribute_cell custom-border-left"><div class="hotcold"><%= player.arm_strength %></div><div class="hotcold"><%= player.arm_strength_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.movement %></div><div class="hotcold"><%= player.movement_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.control %></div><div class="hotcold"><%= player.control_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.location %></div><div class="hotcold"><%= player.location_potential %></div></td>
        <td class="attribute_cell custom-border-left"><div class="hotcold"><%= player.agility %></div><div class="hotcold"><%= player.agility_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.reaction_time %></div><div class="hotcold"><%= player.reaction_time_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.average_fielding %></div><div class="hotcold"><%= player.average_fielding_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.average_throwing %></div><div class="hotcold"><%= player.average_throwing_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.intelligence %></div><div class="hotcold"><%= player.intelligence_potential %></div></td>
        <td class="attribute_cell"><div class="hotcold"><%= player.endurance %></div><div class="hotcold"><%= player.endurance_potential %></div></td>
      </tr>
      <% end %>
    </tbody>
  </table>

  <% @position_names = ["C", "1B", "2B", "3B", "SS", "LF", "CF", "RF"] %>
  <% @player_arrays = [@catchers, @first_basemen, @second_basemen, @third_basemen, @shortstops, @left_fielders, @center_fielders, @right_fielders] %>
  <% @position_names.each_with_index do |name, index| %>
    <h4><%= @position_names[index] %></h4>
    <table class="table table-default custom-smaller-table sortable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Drafted By</th>
          <th>Round</th>
          <th>Pos.</th>
          <th class="info_cell">Position</th>
          <th>Age</th>
          <th class="info_cell">Height</th>
          <th class="info_cell">Weight</th>
          <th class="info_cell">Bats</th>
          <th class="info_cell">Throws</th>
          <th class="info_cell" data-defaultsort="desc">Salary</th>
          <th class="attribute_cell tooltip_enable" title="Batting Average">Bat</th>
          <th class="attribute_cell tooltip_enable" title="Power">Pow</th>
          <th class="attribute_cell tooltip_enable" title="Contact">Con</th>
          <th class="attribute_cell tooltip_enable" title="Plate Vision">Ptv</th>
          <th class="attribute_cell tooltip_enable" title="Patience">Pat</th>
          <th class="attribute_cell tooltip_enable" title="Pull Amount">Pul</th>
          <th class="attribute_cell tooltip_enable" title="Uppercut Amount">Upp</th>
          <th class="attribute_cell tooltip_enable" title="Speed">Spd</th>
          <th class="attribute_cell tooltip_enable" title="Agility">Agl</th>
          <th class="attribute_cell tooltip_enable" title="Reaction Time">Rct</th>
          <th class="attribute_cell tooltip_enable" title="Arm Strength">Arm</th>
          <th class="attribute_cell tooltip_enable" title="Fielding">Fld</th>
          <th class="attribute_cell tooltip_enable" title="Throwing">Thr</th>
          <th class="attribute_cell tooltip_enable" title="Intelligence">Int</th>
          <th class="attribute_cell tooltip_enable" title="Endurance">End</th>
        </tr>
      </thead>
      <tbody>
        <% @player_arrays[index].each do |player| %>
        <tr>
          <td class="player-name-cell"><%= link_to player, player, method: :get %></td>
          <td><% if player.team_id == 1 %>-<% else %><%= link_to player.team.full_name, player.team, method: :get %><% end %></td>
          <td><%= player.team_id == 1 ? "-" : player.draft_round %></td>
          <td><%= player.team_id == 1 ? "-" : player.draft_position %></td>
          <td class="info_cell"><%= player.position %></td>
          <td><%= player.age %></td>
          <td class="height info_cell"><%= player.formatted_height %></td>
          <td class="info_cell"><%= player.weight %> lb.</td>
          <td class="info_cell"><%= player.hitting_side.capitalize %></td>
          <td class="info_cell"><%= player.throwing_hand.capitalize %></td>
          <td class="info_cell salary"><%= number_to_currency(player.salary) %></td>
          <td class="attribute_cell custom-border-left"><div class="hotcold"><%= player.batting_average %></div><div class="hotcold"><%= player.batting_average_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.power %></div><div class="hotcold"><%= player.power_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.contact %></div><div class="hotcold"><%= player.contact_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.plate_vision %></div><div class="hotcold"><%= player.plate_vision_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.patience %></div><div class="hotcold"><%= player.patience_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.pull_amount %></div><div class="hotcold"><%= player.pull_amount_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.uppercut_amount %></div><div class="hotcold"><%= player.uppercut_amount_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.speed %></div><div class="hotcold"><%= player.speed_potential %></div></td>
          <td class="attribute_cell custom-border-left"><div class="hotcold"><%= player.agility %></div><div class="hotcold"><%= player.agility_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.reaction_time %></div><div class="hotcold"><%= player.reaction_time_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.arm_strength %></div><div class="hotcold"><%= player.arm_strength_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.average_fielding %></div><div class="hotcold"><%= player.average_fielding_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.average_throwing %></div><div class="hotcold"><%= player.average_throwing_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.intelligence %></div><div class="hotcold"><%= player.intelligence_potential %></div></td>
          <td class="attribute_cell"><div class="hotcold"><%= player.endurance %></div><div class="hotcold"><%= player.endurance_potential %></div></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>


<script type="text/javascript">
  hotCold();
  $('.salary').each(function() {
    $(this).attr('data-value',salaryToInteger($(this).text()));
  });

  function salaryToInteger(salary) {
    var condensedSalary = salary.replace(/[$,.]/g,''); // Get rid of dollar signs and commas
    return parseInt(condensedSalary);
  }

</script>
